"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var page_1 = require("ui/page");
var nativescript_loading_indicator_1 = require("nativescript-loading-indicator");
var angular_1 = require("nativescript-telerik-ui/sidedrawer/angular");
var elementRegistryModule = require("nativescript-angular/element-registry");
var colorModule = require("tns-core-modules/color");
var restcountries_1 = require("../../shared/restcountries/restcountries");
elementRegistryModule.registerElement("CardView", function () { return require("nativescript-cardview").CardView; });
elementRegistryModule.registerElement("Carousel", function () { return require("nativescript-carousel").Carousel; });
elementRegistryModule.registerElement("CarouselItem", function () { return require("nativescript-carousel").CarouselItem; });
var outh_1 = require("../../shared/outh/outh");
var loader = new nativescript_loading_indicator_1.LoadingIndicator();
var Color = colorModule.Color;
var Country = (function () {
    function Country(name, currency, currency_symbol, currencyRate) {
        this.name = name;
        this.currency = currency;
        this.currency_symbol = currency_symbol;
        this.currencyRate = currencyRate;
    }
    return Country;
}());
var Countries = ["AED", "AFN", "ALL", "AMD", "ANG", "AOA", "ARS", "AUD", "AWG", "AZN", "BAM", "BBD", "BDT", "BGN", "BHD", "BIF",
    "BMD", "BND", "BOB", "BRL", "BSD", "BTC", "BTN", "BWP", "BYN", "BYR", "BZD", "CAD", "CDF", "CHF", "CLF", "CLP", "CNY", "COP", "CRC", "CUC",
    "CUP", "CVE", "CZK", "DJF", "DKK", "DOP", "DZD", "EEK", "EGP", "ERN", "ETB", "EUR", "FJD", "FKP", "GBP", "GEL", "GGP", "GHS", "GIP", "GMD",
    "GNF", "GTQ", "GYD", "HKD", "HNL", "HRK", "HTG", "HUF", "IDR", "ILS", "IMP", "INR", "IQD", "IRR", "ISK", "JEP", "JMD", "JOD", "JPY", "KES",
    "KGS", "KHR", "KMF", "KPW", "KRW", "KWD", "KYD", "KZT", "LAK", "LBP", "LKR", "LRD", "LSL", "LTL", "LVL", "LYD", "MAD", "MDL", "MGA", "MKD",
    "MMK", "MNT", "MOP", "MRO", "MUR", "MVR", "MWK", "MXN", "MYR", "MZN", "NAD", "NGN", "NIO", "NOK", "NPR", "NZD", "OMR", "PAB", "PEN", "PGK",
    "PHP", "PKR", "PLN", "PYG", "QAR", "RON", "RSD", "RUB", "RWF", "SAR", "SBD", "SCR", "SDG", "SEK", "SGD", "SHP", "SLL", "SOS", "SRD", "STD",
    "SVC", "SYP", "SZL", "THB", "TJS", "TMT", "TND", "TOP", "TRY", "TTD", "TWD", "TZS", "UAH", "UGX", "UYU", "UZS", "VEF", "VND", "VUV",
    "WST", "XAF", "XCD", "XDR", "XOF", "XPF", "YER", "ZAR", "ZMK", "ZMW", "ZWL"];
var landingComponents = (function () {
    function landingComponents(page, OuthService, restCountries) {
        var _this = this;
        this.page = page;
        this.OuthService = OuthService;
        this.restCountries = restCountries;
        this.countries = [];
        var _loop_1 = function (i) {
            this_1.restCountries.getBycurreny(Countries[i]).subscribe(function (res) {
                for (var _i = 0, res_1 = res; _i < res_1.length; _i++) {
                    var country = res_1[_i];
                    var currencie_symbol = void 0;
                    for (var _a = 0, _b = country.currencies; _a < _b.length; _a++) {
                        var currencie = _b[_a];
                        currencie_symbol = currencie.symbol;
                    }
                    _this.countries.push(new Country(country.name, Countries[i], currencie_symbol, ""));
                }
            });
        };
        var this_1 = this;
        for (var i = 0; i < Countries.length; i++) {
            _loop_1(i);
        }
        this.restCountries.getCurrencyRate().subscribe(function (res) {
            var _loop_2 = function (exchange) {
                var ex = exchange.split("USD");
                var same = _this.countries.filter(function (Country) { return Country.currency === ex[1]; });
                if (same) {
                    for (var i = 0; i < same.length; i++)
                        same[i].currencyRate = res.quotes[exchange];
                }
            };
            for (var exchange in res.quotes) {
                _loop_2(exchange);
            }
        });
    }
    landingComponents.prototype.onItemTap = function (args) {
        console.log("Item Tapped at cell index: " + args.index);
    };
    landingComponents.prototype.ngOnInit = function () {
        this.page.actionBarHidden = true;
        var user_profile = localStorage.getItem('user_profile');
        var user_name = user_profile['name'];
        var user_profile_pic = user_profile['picture'];
        var profile_img = this.page.getViewById('profile_pic');
        profile_img.stretch = "aspectFill";
        profile_img.src = "data:image/png;base64," + user_profile_pic;
        this.email = user_profile['email'];
        this.username = user_profile['username'];
    };
    landingComponents.prototype.onMenuTapped = function (value) {
        console.log(value);
        this.drawer.closeDrawer();
    };
    return landingComponents;
}());
__decorate([
    core_1.ViewChild(angular_1.RadSideDrawerComponent),
    __metadata("design:type", angular_1.RadSideDrawerComponent)
], landingComponents.prototype, "drawerComponent", void 0);
landingComponents = __decorate([
    core_1.Component({
        selector: 'landing',
        templateUrl: './pages/landing/landing.components.html',
        styleUrls: ['pages/landing/landing.components.css'],
        providers: [outh_1.OuthService, restcountries_1.restcountries]
    }),
    __metadata("design:paramtypes", [page_1.Page, outh_1.OuthService, restcountries_1.restcountries])
], landingComponents);
exports.landingComponents = landingComponents;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGFuZGluZy5jb21wb25lbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibGFuZGluZy5jb21wb25lbnRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQW1FO0FBRW5FLGdDQUE2QjtBQUc3QixpRkFBZ0U7QUFDaEUsc0VBQW9HO0FBQ3BHLDZFQUErRTtBQUMvRSxvREFBc0Q7QUFDdEQsMEVBQXlFO0FBQ3pFLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsY0FBTSxPQUFBLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLFFBQVEsRUFBekMsQ0FBeUMsQ0FBQyxDQUFDO0FBQ25HLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUMsY0FBSSxPQUFBLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLFFBQVEsRUFBekMsQ0FBeUMsQ0FBQyxDQUFBO0FBQy9GLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxjQUFjLEVBQUMsY0FBSSxPQUFBLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLFlBQVksRUFBN0MsQ0FBNkMsQ0FBQyxDQUFBO0FBRXZHLCtDQUFxRDtBQUVyRCxJQUFJLE1BQU0sR0FBRyxJQUFJLGlEQUFnQixFQUFFLENBQUM7QUFDcEMsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQztBQUU5QjtJQUNJLGlCQUFtQixJQUFZLEVBQVEsUUFBUSxFQUFTLGVBQWUsRUFBUyxZQUFZO1FBQXpFLFNBQUksR0FBSixJQUFJLENBQVE7UUFBUSxhQUFRLEdBQVIsUUFBUSxDQUFBO1FBQVMsb0JBQWUsR0FBZixlQUFlLENBQUE7UUFBUyxpQkFBWSxHQUFaLFlBQVksQ0FBQTtJQUFJLENBQUM7SUFDckcsY0FBQztBQUFELENBQUMsQUFGRCxJQUVDO0FBRUQsSUFBSSxTQUFTLEdBQUcsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLO0lBQ2hILEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLO0lBQ3ZILEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLO0lBQ3ZILEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLO0lBQ3ZILEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLLEVBQUMsS0FBSyxFQUFDLEtBQUssRUFBQyxLQUFLO0lBQ3ZI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S0FBVTtRQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUNMLHdCQUFDO0FBQUQsQ0FBQyxBQTlERCxJQThEQztBQTFCRTtJQURBLGdCQUFTLENBQUMsZ0NBQXNCLENBQUM7OEJBQ1QsZ0NBQXNCOzBEQUFDO0FBcENyQyxpQkFBaUI7SUFSN0IsZ0JBQVMsQ0FBQztRQUNULFFBQVEsRUFBQyxTQUFTO1FBQ2xCLFdBQVcsRUFBQyx5Q0FBeUM7UUFDckQsU0FBUyxFQUFDLENBQUMsc0NBQXNDLENBQUM7UUFDbEQsU0FBUyxFQUFDLENBQUMsa0JBQVcsRUFBQyw2QkFBYSxDQUFDO0tBRXRDLENBQUM7cUNBT3lCLFdBQUksRUFBcUIsa0JBQVcsRUFBdUIsNkJBQWE7R0FMdEYsaUJBQWlCLENBOEQ3QjtBQTlEWSw4Q0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsT25Jbml0LE5nTW9kdWxlLFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJvdXRlckV4dGVuc2lvbnMgfSBmcm9tICduYXRpdmVzY3JpcHQtYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge1BhZ2V9IGZyb20gXCJ1aS9wYWdlXCI7XHJcbmltcG9ydCB7IEltYWdlIH0gZnJvbSBcInVpL2ltYWdlXCI7XHJcbmltcG9ydCAqIGFzIEltYWdlU291cmNlIGZyb20gXCJpbWFnZS1zb3VyY2VcIjtcclxuaW1wb3J0IHtMb2FkaW5nSW5kaWNhdG9yfSBmcm9tIFwibmF0aXZlc2NyaXB0LWxvYWRpbmctaW5kaWNhdG9yXCI7XHJcbmltcG9ydCB7IFJhZFNpZGVEcmF3ZXJDb21wb25lbnQsIFNpZGVEcmF3ZXJUeXBlIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC10ZWxlcmlrLXVpL3NpZGVkcmF3ZXIvYW5ndWxhclwiO1xyXG5pbXBvcnQgKiBhcyBlbGVtZW50UmVnaXN0cnlNb2R1bGUgZnJvbSAnbmF0aXZlc2NyaXB0LWFuZ3VsYXIvZWxlbWVudC1yZWdpc3RyeSc7XHJcbmltcG9ydCAqIGFzIGNvbG9yTW9kdWxlIGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL2NvbG9yXCI7XHJcbmltcG9ydCB7IHJlc3Rjb3VudHJpZXMgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL3Jlc3Rjb3VudHJpZXMvcmVzdGNvdW50cmllc1wiO1xyXG5lbGVtZW50UmVnaXN0cnlNb2R1bGUucmVnaXN0ZXJFbGVtZW50KFwiQ2FyZFZpZXdcIiwgKCkgPT4gcmVxdWlyZShcIm5hdGl2ZXNjcmlwdC1jYXJkdmlld1wiKS5DYXJkVmlldyk7XHJcbmVsZW1lbnRSZWdpc3RyeU1vZHVsZS5yZWdpc3RlckVsZW1lbnQoXCJDYXJvdXNlbFwiLCgpPT5yZXF1aXJlKFwibmF0aXZlc2NyaXB0LWNhcm91c2VsXCIpLkNhcm91c2VsKVxyXG5lbGVtZW50UmVnaXN0cnlNb2R1bGUucmVnaXN0ZXJFbGVtZW50KFwiQ2Fyb3VzZWxJdGVtXCIsKCk9PnJlcXVpcmUoXCJuYXRpdmVzY3JpcHQtY2Fyb3VzZWxcIikuQ2Fyb3VzZWxJdGVtKVxyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAndWkvY29yZS92aWV3JztcclxuaW1wb3J0IHsgT3V0aFNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vc2hhcmVkL291dGgvb3V0aFwiO1xyXG5cclxudmFyIGxvYWRlciA9IG5ldyBMb2FkaW5nSW5kaWNhdG9yKCk7XHJcbnZhciBDb2xvciA9IGNvbG9yTW9kdWxlLkNvbG9yO1xyXG5cclxuY2xhc3MgQ291bnRyeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTogc3RyaW5nLHB1YmxpYyBjdXJyZW5jeSAscHVibGljIGN1cnJlbmN5X3N5bWJvbCAscHVibGljIGN1cnJlbmN5UmF0ZSkgeyB9XHJcbn1cclxuXHJcbmxldCBDb3VudHJpZXMgPSBbXCJBRURcIixcIkFGTlwiLFwiQUxMXCIsXCJBTURcIixcIkFOR1wiLFwiQU9BXCIsXCJBUlNcIixcIkFVRFwiLFwiQVdHXCIsXCJBWk5cIixcIkJBTVwiLFwiQkJEXCIsXCJCRFRcIixcIkJHTlwiLFwiQkhEXCIsXCJCSUZcIixcclxuXCJCTURcIixcIkJORFwiLFwiQk9CXCIsXCJCUkxcIixcIkJTRFwiLFwiQlRDXCIsXCJCVE5cIixcIkJXUFwiLFwiQllOXCIsXCJCWVJcIixcIkJaRFwiLFwiQ0FEXCIsXCJDREZcIixcIkNIRlwiLFwiQ0xGXCIsXCJDTFBcIixcIkNOWVwiLFwiQ09QXCIsXCJDUkNcIixcIkNVQ1wiLFxyXG5cIkNVUFwiLFwiQ1ZFXCIsXCJDWktcIixcIkRKRlwiLFwiREtLXCIsXCJET1BcIixcIkRaRFwiLFwiRUVLXCIsXCJFR1BcIixcIkVSTlwiLFwiRVRCXCIsXCJFVVJcIixcIkZKRFwiLFwiRktQXCIsXCJHQlBcIixcIkdFTFwiLFwiR0dQXCIsXCJHSFNcIixcIkdJUFwiLFwiR01EXCIsXHJcblwiR05GXCIsXCJHVFFcIixcIkdZRFwiLFwiSEtEXCIsXCJITkxcIixcIkhSS1wiLFwiSFRHXCIsXCJIVUZcIixcIklEUlwiLFwiSUxTXCIsXCJJTVBcIixcIklOUlwiLFwiSVFEXCIsXCJJUlJcIixcIklTS1wiLFwiSkVQXCIsXCJKTURcIixcIkpPRFwiLFwiSlBZXCIsXCJLRVNcIixcclxuXCJLR1NcIixcIktIUlwiLFwiS01GXCIsXCJLUFdcIixcIktSV1wiLFwiS1dEXCIsXCJLWURcIixcIktaVFwiLFwiTEFLXCIsXCJMQlBcIixcIkxLUlwiLFwiTFJEXCIsXCJMU0xcIixcIkxUTFwiLFwiTFZMXCIsXCJMWURcIixcIk1BRFwiLFwiTURMXCIsXCJNR0FcIixcIk1LRFwiLFxyXG5cIk1NS1wiLFwiTU5UXCIsXCJNT1BcIixcIk1ST1wiLFwiTVVSXCIsXCJNVlJcIixcIk1XS1wiLFwiTVhOXCIsXCJNWVJcIixcIk1aTlwiLFwiTkFEXCIsXCJOR05cIixcIk5JT1wiLFwiTk9LXCIsXCJOUFJcIixcIk5aRFwiLFwiT01SXCIsXCJQQUJcIixcIlBFTlwiLFwiUEdLXCJcclxuLFwiUEhQXCIsXCJQS1JcIixcIlBMTlwiLFwiUFlHXCIsXCJRQVJcIixcIlJPTlwiLFwiUlNEXCIsXCJSVUJcIixcIlJXRlwiLFwiU0FSXCIsXCJTQkRcIixcIlNDUlwiLFwiU0RHXCIsXCJTRUtcIixcIlNHRFwiLFwiU0hQXCIsXCJTTExcIixcIlNPU1wiLFwiU1JEXCIsXCJTVERcIixcclxuXCJTVkNcIixcIlNZUFwiLFwiU1pMXCIsXCJUSEJcIixcIlRKU1wiLFwiVE1UXCIsXCJUTkRcIixcIlRPUFwiLFwiVFJZXCIsXCJUVERcIixcIlRXRFwiLFwiVFpTXCIsXCJVQUhcIixcIlVHWFwiLFwiVVlVXCIsXCJVWlNcIixcIlZFRlwiLFwiVk5EXCIsXCJWVVZcIixcclxuXCJXU1RcIixcIlhBRlwiLFwiWENEXCIsXCJYRFJcIixcIlhPRlwiLFwiWFBGXCIsXCJZRVJcIixcIlpBUlwiLFwiWk1LXCIsXCJaTVdcIixcIlpXTFwiXTtcclxuXHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6J2xhbmRpbmcnLFxyXG4gIHRlbXBsYXRlVXJsOicuL3BhZ2VzL2xhbmRpbmcvbGFuZGluZy5jb21wb25lbnRzLmh0bWwnLFxyXG4gIHN0eWxlVXJsczpbJ3BhZ2VzL2xhbmRpbmcvbGFuZGluZy5jb21wb25lbnRzLmNzcyddLFxyXG4gIHByb3ZpZGVyczpbT3V0aFNlcnZpY2UscmVzdGNvdW50cmllc11cclxuXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgbGFuZGluZ0NvbXBvbmVudHMgaW1wbGVtZW50cyBPbkluaXR7XHJcbiAgcHJpdmF0ZSBkcmF3ZXI6IFNpZGVEcmF3ZXJUeXBlO1xyXG4gIHByaXZhdGUgZW1haWw6IFN0cmluZztcclxuICBwcml2YXRlIHVzZXJuYW1lOlN0cmluZztcclxuICBwdWJsaWMgY291bnRyaWVzOiBBcnJheTxDb3VudHJ5PjtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBhZ2U6UGFnZSxwcml2YXRlIE91dGhTZXJ2aWNlOk91dGhTZXJ2aWNlLHByaXZhdGUgcmVzdENvdW50cmllczpyZXN0Y291bnRyaWVzKXtcclxuICAgIHRoaXMuY291bnRyaWVzID0gW107XHJcblxyXG4gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDb3VudHJpZXMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICB0aGlzLnJlc3RDb3VudHJpZXMuZ2V0QnljdXJyZW55KENvdW50cmllc1tpXSkuc3Vic2NyaWJlKChyZXMpPT57XHJcbiAgICAgICAgICAgIGZvcihsZXQgY291bnRyeSBvZiByZXMpe1xyXG4gICAgICAgICAgICAgIGxldCBjdXJyZW5jaWVfc3ltYm9sO1xyXG4gICAgICAgICAgICAgIGZvcihsZXQgY3VycmVuY2llIG9mIGNvdW50cnkuY3VycmVuY2llcyApe1xyXG4gICAgICAgICAgICAgICAgY3VycmVuY2llX3N5bWJvbD1jdXJyZW5jaWUuc3ltYm9sO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLmNvdW50cmllcy5wdXNoKG5ldyBDb3VudHJ5KGNvdW50cnkubmFtZSxDb3VudHJpZXNbaV0sY3VycmVuY2llX3N5bWJvbCxcIlwiKSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgIH1cclxuICAgICAgIHRoaXMucmVzdENvdW50cmllcy5nZXRDdXJyZW5jeVJhdGUoKS5zdWJzY3JpYmUoKHJlcyk9PntcclxuICAgICAgICAgZm9yKGxldCBleGNoYW5nZSBpbiByZXMucXVvdGVzKXtcclxuICAgICAgICAgICBsZXQgZXg9ZXhjaGFuZ2Uuc3BsaXQoXCJVU0RcIik7XHJcbiAgICAgICAgICAgbGV0IHNhbWU9dGhpcy5jb3VudHJpZXMuZmlsdGVyKENvdW50cnk9PkNvdW50cnkuY3VycmVuY3k9PT1leFsxXSk7XHJcbiAgICAgICAgICAgaWYoc2FtZSl7XHJcbiAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPHNhbWUubGVuZ3RoO2krKylcclxuICAgICAgICAgICAgIHNhbWVbaV0uY3VycmVuY3lSYXRlPXJlcy5xdW90ZXNbZXhjaGFuZ2VdO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuXHJcblxyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZChSYWRTaWRlRHJhd2VyQ29tcG9uZW50KVxyXG4gICBwdWJsaWMgZHJhd2VyQ29tcG9uZW50OiBSYWRTaWRlRHJhd2VyQ29tcG9uZW50O1xyXG5cclxuXHJcbiAgIHB1YmxpYyBvbkl0ZW1UYXAoYXJncykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJJdGVtIFRhcHBlZCBhdCBjZWxsIGluZGV4OiBcIiArIGFyZ3MuaW5kZXgpO1xyXG4gICAgICB9XHJcblxyXG5uZ09uSW5pdCgpe1xyXG4gIHRoaXMucGFnZS5hY3Rpb25CYXJIaWRkZW49dHJ1ZTtcclxuICBsZXQgdXNlcl9wcm9maWxlPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX3Byb2ZpbGUnKTtcclxuICBsZXQgdXNlcl9uYW1lPXVzZXJfcHJvZmlsZVsnbmFtZSddO1xyXG4gIGxldCB1c2VyX3Byb2ZpbGVfcGljPXVzZXJfcHJvZmlsZVsncGljdHVyZSddO1xyXG4gIGxldCBwcm9maWxlX2ltZz08SW1hZ2U+dGhpcy5wYWdlLmdldFZpZXdCeUlkKCdwcm9maWxlX3BpYycpO1xyXG4gIHByb2ZpbGVfaW1nLnN0cmV0Y2g9XCJhc3BlY3RGaWxsXCI7XHJcbiAgcHJvZmlsZV9pbWcuc3JjPVwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LFwiK3VzZXJfcHJvZmlsZV9waWM7XHJcbiAgdGhpcy5lbWFpbD11c2VyX3Byb2ZpbGVbJ2VtYWlsJ107XHJcbiAgdGhpcy51c2VybmFtZT11c2VyX3Byb2ZpbGVbJ3VzZXJuYW1lJ107XHJcblxyXG4gIH1cclxuXHJcblxyXG5cclxuICBwdWJsaWMgb25NZW51VGFwcGVkKHZhbHVlOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5kcmF3ZXIuY2xvc2VEcmF3ZXIoKTtcclxuICAgIH1cclxufVxyXG4iXX0=